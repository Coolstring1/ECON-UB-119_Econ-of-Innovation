operas_c <- operas %>% mutate(treated = state %in% c("lombardy", "venetia")) %>%
mutate(treated = as.numeric(treated)) %>%
group_by(year, treated) %>%
summarise(operas_count = n(),
regions = n_distinct(state))
## Petra Moser & Vasily Rusanov
## Data lab #5
## Giorcelli, Michela and Moser, Petra, Copyrights and Creativity:
## Evidence from Italian Operas (December 28, 2016).
## Available at SSRN: https://ssrn.com/abstract=2505776
## published version: https://www.journals.uchicago.edu/doi/abs/10.1086/710534
library(tidyverse)
library(huxtable)
library(haven) # to read .dta files
library(gridExtra)
library(lfe) # to run fixed effect models
#########
# Part 1: figure
#########
# Import the data
# The file 20years.dta has *all*  the operas created in 1781-1821 (even if the composer
# and/or the name is unknown).
operas <- read_stata("20years.dta")  # read_dta is used for .dta files
#let's look at the different regions in italy
print(unique(operas$state))
operas_c <- operas %>% mutate(treated = state %in% c("lombardy", "venetia")) %>%
mutate(treated = as.numeric(treated)) %>%
group_by(year, treated) %>%
summarise(operas_count = n(),
regions = n_distinct(state))
### GRAPH ###
# reshape data to wide to make graphs
operas_w <- reshape(as.data.frame(operas_c),
idvar = "year", # which var is id
direction = "wide", # how you want things reshaped
timevar = "treated",  # which var is repeating
sep = "_")
# Make two Time Series Graphs (figure 1B below, easy to change for Figure 2B)
ggplot(operas_w) +
geom_line(aes(x=year, y=operas_count_0, colour = "royalblue"), size = .8) +
geom_point(aes(x=year, y=operas_count_0, colour = "royalblue"), size = 1.2) +
geom_line(aes(x=year, y=operas_count_1, colour = "darkorange2"), size = .8) +
geom_point(aes(x=year, y=operas_count_1, colour = "darkorange2"), size = 1.2) +
scale_color_identity(name = "",
breaks = c("royalblue", "darkorange2"),
labels = c("Operas in regions without copyright",
"Operas in regions with copyright"),
guide = "legend") +
theme_bw() +
xlab("Year") +
ylab("Operas, total") +
ggtitle("Figure 1 - Opears in Italian regions") +
theme(legend.position = "right", legend.text = element_text(size = 10))
